<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>Nouveau Patient - Algorithme Lithiase KALONJI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/css/myoneart.css">
</head>
<body class="page-bg">
    <nav class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <h1 class="text-3xl font-bold">üíé KALONJI</h1>
            <div class="flex items-center space-x-6">
                <a href="/" class="hover:text-indigo-200 transition-colors font-medium">üè† Tableau de bord</a>
                <a href="/nouveau-patient" class="hover:text-indigo-200 transition-colors font-medium text-indigo-300">‚ûï Nouveau Patient</a>
                <a href="/search" class="hover:text-indigo-200 transition-colors font-medium">üîç Recherche avanc√©e</a>
                <a href="/parametres" class="hover:text-indigo-200 transition-colors font-medium">‚öôÔ∏è Param√®tres</a>
                <a href="/logout" class="hover:text-indigo-200 transition-colors font-medium">üö™ D√©connexion</a>
            </div>
        </div>
    </nav>
    
    <div class="container mx-auto p-6 max-w-7xl">
        <div class="card">
            <div class="border-b border-gray-200 pb-4 mb-6">
                <h2 class="text-3xl font-bold text-gray-800">‚ûï Nouveau Patient</h2>
                <p class="text-gray-600 mt-2">Formulaire complet pour enregistrer un nouveau patient avec analyse morpho-constitutionnelle</p>
            </div>
            
            <!-- Section: Objectifs de l'analyse -->
            <div class="bg-gradient-to-r from-indigo-100 to-purple-100 border-2 border-indigo-300 rounded-lg p-6 mb-6">
                <h3 class="text-xl font-bold text-indigo-900 mb-3 flex items-center">
                    <span class="text-2xl mr-2">üéØ</span> Objectifs de l'analyse
                </h3>
                <ul class="space-y-2 text-sm text-gray-800">
                    <li class="flex items-start">
                        <span class="text-indigo-600 mr-2">‚úì</span>
                        <span>D√©terminer la <strong>nature morpho-constitutionnelle</strong> du calcul selon la classification de Daudon</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-indigo-600 mr-2">‚úì</span>
                        <span>D√©tecter les <strong>anomalies dans les habitudes</strong> du patient favorisant la formation des calculs</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-indigo-600 mr-2">‚úì</span>
                        <span>Proposer un <strong>r√©gime alimentaire adapt√©</strong> pour pr√©venir les r√©cidives</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-indigo-600 mr-2">‚úì</span>
                        <span>Recommander un <strong>traitement m√©dical</strong> fond√© sur les derni√®res donn√©es scientifiques</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-indigo-600 mr-2">‚úì</span>
                        <span>En cas d'infection urinaire associ√©e : proposer un traitement adapt√© selon la <strong>nature du germe</strong> isol√©</span>
                    </li>
                </ul>
            </div>
            
            <form id="newPatientForm" class="space-y-8">
                <!-- Section: Informations personnelles -->
                <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-blue-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">üë§</span> Informations personnelles
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nom *</label>
                            <input type="text" name="nom" required class="input-field">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Pr√©nom *</label>
                            <input type="text" name="prenom" required class="input-field">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date de naissance *</label>
                            <input type="date" name="date_naissance" required class="input-field">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sexe *</label>
                            <select name="sexe" required class="input-field">
                                <option value="M">Masculin</option>
                                <option value="F">F√©minin</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üåç Groupe ethnique</label>
                            <select name="groupe_ethnique" class="input-field">
                                <option value="">-- S√©lectionner --</option>
                                <option value="Luba">Luba</option>
                                <option value="Mongo">Mongo</option>
                                <option value="Kongo">Kongo</option>
                                <option value="Azande">Azande</option>
                                <option value="Bangi">Bangi et Ngale</option>
                                <option value="Rundi">Rundi</option>
                                <option value="Teke">Teke</option>
                                <option value="Boa">Boa</option>
                                <option value="Chokwe">Chokwe</option>
                                <option value="Autre">Autre</option>
                                <option value="Non precise">Non pr√©cis√©</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìû T√©l√©phone</label>
                            <input type="tel" name="telephone" class="input-field">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìß Email</label>
                            <input type="email" name="email" class="input-field">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìç Province</label>
                            <select name="province" class="input-field">
                                <option value="">-- S√©lectionner --</option>
                                <option value="Kinshasa">Kinshasa</option>
                                <option value="Kongo-Central">Kongo-Central</option>
                                <option value="Kwango">Kwango</option>
                                <option value="Kwilu">Kwilu</option>
                                <option value="Mai-Ndombe">Mai-Ndombe</option>
                                <option value="Kasai">Kasa√Ø</option>
                                <option value="Kasai-Central">Kasa√Ø-Central</option>
                                <option value="Kasai-Oriental">Kasa√Ø-Oriental</option>
                                <option value="Lomami">Lomami</option>
                                <option value="Sankuru">Sankuru</option>
                                <option value="Maniema">Maniema</option>
                                <option value="Sud-Kivu">Sud-Kivu</option>
                                <option value="Nord-Kivu">Nord-Kivu</option>
                                <option value="Ituri">Ituri</option>
                                <option value="Haut-Uele">Haut-U√©l√©</option>
                                <option value="Tshopo">Tshopo</option>
                                <option value="Bas-Uele">Bas-U√©l√©</option>
                                <option value="Nord-Ubangi">Nord-Ubangi</option>
                                <option value="Sud-Ubangi">Sud-Ubangi</option>
                                <option value="Mongala">Mongala</option>
                                <option value="Equateur">√âquateur</option>
                                <option value="Tshuapa">Tshuapa</option>
                                <option value="Tanganyika">Tanganyika</option>
                                <option value="Haut-Lomami">Haut-Lomami</option>
                                <option value="Lualaba">Lualaba</option>
                                <option value="Haut-Katanga">Haut-Katanga</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üèôÔ∏è Ville</label>
                            <select name="ville" class="input-field">
                                <option value="">-- S√©lectionner --</option>
                                <option value="Kinshasa">Kinshasa</option>
                                <option value="Lubumbashi">Lubumbashi</option>
                                <option value="Mbuji-Mayi">Mbuji-Mayi</option>
                                <option value="Kananga">Kananga</option>
                                <option value="Kisangani">Kisangani</option>
                                <option value="Goma">Goma</option>
                                <option value="Bukavu">Bukavu</option>
                                <option value="Likasi">Likasi</option>
                                <option value="Kolwezi">Kolwezi</option>
                                <option value="Tshikapa">Tshikapa</option>
                                <option value="Kikwit">Kikwit</option>
                                <option value="Mbandaka">Mbandaka</option>
                                <option value="Matadi">Matadi</option>
                                <option value="Bunia">Bunia</option>
                                <option value="Uvira">Uvira</option>
                                <option value="Beni">Beni</option>
                                <option value="Butembo">Butembo</option>
                                <option value="Kalemie">Kalemie</option>
                                <option value="Isiro">Isiro</option>
                                <option value="Bandundu">Bandundu</option>
                                <option value="Gemena">Gemena</option>
                                <option value="Kindu">Kindu</option>
                                <option value="Kamina">Kamina</option>
                                <option value="Boma">Boma</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üíº Profession</label>
                            <select name="profession" class="input-field">
                                <option value="">-- S√©lectionner --</option>
                                <option value="Agriculteur">Agriculteur</option>
                                <option value="Commercant">Commer√ßant</option>
                                <option value="Enseignant">Enseignant</option>
                                <option value="Fonctionnaire">Fonctionnaire</option>
                                <option value="Medecin">M√©decin</option>
                                <option value="Infirmier">Infirmier</option>
                                <option value="Ingenieur">Ing√©nieur</option>
                                <option value="Chauffeur">Chauffeur</option>
                                <option value="Artisan">Artisan</option>
                                <option value="Etudiant">√âtudiant</option>
                                <option value="Militaire">Militaire</option>
                                <option value="Policier">Policier</option>
                                <option value="Mineur">Mineur</option>
                                <option value="Ouvrier">Ouvrier</option>
                                <option value="Menagere">M√©nag√®re</option>
                                <option value="Retraite">Retrait√©</option>
                                <option value="Chomeur">Ch√¥meur</option>
                                <option value="Travailleur independant">Travailleur ind√©pendant</option>
                                <option value="Autre">Autre</option>
                                <option value="Non precise">Non pr√©cis√©</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üéì Niveau d'√©ducation</label>
                            <select name="niveau_education" class="input-field">
                                <option value="">-- S√©lectionner --</option>
                                <option value="Aucun">Aucun</option>
                                <option value="Primaire">Primaire</option>
                                <option value="Secondaire">Secondaire</option>
                                <option value="Superieur">Sup√©rieur</option>
                                <option value="Universitaire">Universitaire</option>
                                <option value="Non precise">Non pr√©cis√©</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üíë Statut matrimonial</label>
                            <select name="statut_matrimonial" class="input-field">
                                <option value="">-- S√©lectionner --</option>
                                <option value="Celibataire">C√©libataire</option>
                                <option value="Marie">Mari√©(e)</option>
                                <option value="Divorce">Divorc√©(e)</option>
                                <option value="Veuf">Veuf/Veuve</option>
                                <option value="Union libre">Union libre</option>
                                <option value="Non precise">Non pr√©cis√©</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìç Adresse</label>
                            <textarea name="adresse" rows="2" class="input-field"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Section: Anthropom√©trie -->
                <div class="bg-green-50 border-2 border-green-200 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-green-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">‚öñÔ∏è</span> Anthropom√©trie
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‚öñÔ∏è Poids (kg)</label>
                            <input type="number" step="0.1" name="poids" id="poids" class="input-field" placeholder="Ex: 75.5">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìè Taille (cm)</label>
                            <input type="number" step="0.1" name="taille" id="taille" class="input-field" placeholder="Ex: 175">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìä IMC (calcul√© automatiquement)</label>
                            <input type="text" id="imc" class="input-field bg-gray-100" readonly placeholder="--">
                        </div>
                    </div>
                </div>

                <!-- Section: Constantes vitales -->
                <div class="bg-cyan-50 border-2 border-cyan-200 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-cyan-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">ü©∫</span> Constantes vitales
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üíâ Tension art√©rielle systolique (mmHg)</label>
                            <input type="number" step="0.1" name="tension_arterielle_systolique" class="input-field" placeholder="Ex: 120">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üíâ Tension art√©rielle diastolique (mmHg)</label>
                            <input type="number" step="0.1" name="tension_arterielle_diastolique" class="input-field" placeholder="Ex: 80">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‚ù§Ô∏è Fr√©quence cardiaque (bpm)</label>
                            <input type="number" step="0.1" name="frequence_cardiaque" class="input-field" placeholder="Ex: 72">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üå°Ô∏è Temp√©rature (¬∞C)</label>
                            <input type="number" step="0.1" name="temperature" class="input-field" placeholder="Ex: 37.0">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ü´Å Fr√©quence respiratoire (/min)</label>
                            <input type="number" step="0.1" name="frequence_respiratoire" class="input-field" placeholder="Ex: 16">
                        </div>
                    </div>
                </div>

                <!-- Section: Ant√©c√©dents m√©dicaux -->
                <div class="bg-red-50 border-2 border-red-200 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-red-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">üè•</span> Ant√©c√©dents m√©dicaux
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìã Ant√©c√©dents personnels (Uro, m√©taboliques, endocrino...)</label>
                            <textarea name="antecedents_personnels" rows="3" class="input-field" placeholder="D√©crivez les ant√©c√©dents urologiques, m√©taboliques, endocriniens..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ant√©c√©dents familiaux (lithiase)</label>
                            <textarea name="antecedents_familiaux" rows="2" class="input-field" placeholder="Historique familial de lithiase..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üè• Ant√©c√©dents chirurgicaux</label>
                            <textarea name="antecedents_chirurgicaux" rows="2" class="input-field" placeholder="Chirurgies ant√©rieures..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‚ö†Ô∏è Allergies</label>
                            <textarea name="allergies" rows="2" class="input-field" placeholder="Allergies m√©dicamenteuses ou autres..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üíä Traitements en cours (liste + posologies)</label>
                            <textarea name="traitements_chroniques" rows="3" class="input-field" placeholder="M√©dicaments pris r√©guli√®rement avec posologies..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Section: Habitudes alimentaires -->
                <div class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-yellow-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">üçΩÔ∏è</span> Habitudes alimentaires
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üíß Hydratation quotidienne (L/jour)</label>
                            <input type="number" step="0.1" name="hydratation_jour" class="input-field" placeholder="Ex: 2.5">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üç¥ R√©gime alimentaire g√©n√©ral</label>
                            <textarea name="regime_alimentaire" rows="2" class="input-field" placeholder="R√©gime riche en prot√©ines/sel/oxalate... Pr√©cisez les caract√©ristiques g√©n√©rales"></textarea>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üåÖ Petit d√©jeuner</label>
                                <textarea name="petit_dejeuner" rows="3" class="input-field" placeholder="Types d'aliments consomm√©s au petit d√©jeuner..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‚òÄÔ∏è D√©jeuner</label>
                                <textarea name="dejeuner" rows="3" class="input-field" placeholder="Types d'aliments consomm√©s au d√©jeuner..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üåô D√Æner</label>
                                <textarea name="diner" rows="3" class="input-field" placeholder="Types d'aliments consomm√©s au d√Æner..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üç™ Grignotage & go√ªters</label>
                                <textarea name="grignotage" rows="3" class="input-field" placeholder="Grignotages, go√ªters, encas..."></textarea>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üç∑ Autres consommations (ap√©ritifs, boissons...)</label>
                            <textarea name="autres_consommations" rows="2" class="input-field" placeholder="Ap√©ritifs, boissons sp√©cifiques, autres consommations..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Section: Imagerie m√©dicale -->
                <div class="bg-purple-50 border-2 border-purple-200 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-purple-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">üî¨</span> Imagerie m√©dicale
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìã ASP (Abdomen Sans Pr√©paration)</label>
                            <textarea name="asp_resultats" rows="3" class="input-field" placeholder="R√©sultats de la radiographie standard (ASP)..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üîä √âchographie</label>
                            <textarea name="echographie_resultats" rows="3" class="input-field" placeholder="R√©sultats de l'√©chographie..."></textarea>
                        </div>
                        
                        <!-- Uro-scanner avec d√©tails des calculs int√©gr√©s -->
                        <div class="border-l-4 border-purple-400 pl-4">
                            <h4 class="text-lg font-semibold text-purple-800 mb-3 flex items-center">
                                <span class="text-xl mr-2">üíª</span> Uro-scanner & d√©tails des calculs r√©naux
                            </h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">üìù R√©sultats g√©n√©raux de l'uro-scanner</label>
                                    <textarea name="uroscanner_resultats" rows="3" class="input-field" placeholder="R√©sultats de l'uro-scanner..."></textarea>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">üî¢ Nombre de calculs</label>
                                        <input type="number" name="nombre_calculs" class="input-field" placeholder="Ex: 2">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">üó∫Ô∏è Topographie du calcul</label>
                                        <input type="text" name="topographie_calcul" class="input-field" placeholder="Ex: Rein droit, calice inf√©rieur, uret√®re...">
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">üìè Diam√®tre longitudinal (mm)</label>
                                        <input type="number" step="0.1" name="diametre_longitudinal" class="input-field" placeholder="Ex: 12.5">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">üìê Diam√®tre transversal (mm)</label>
                                        <input type="number" step="0.1" name="diametre_transversal" class="input-field" placeholder="Ex: 8.3">
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">üî∂ Forme du calcul</label>
                                        <select name="forme_calcul" class="input-field">
                                            <option value="">-- S√©lectionner --</option>
                                            <option value="Arrondie">Arrondie</option>
                                            <option value="Ovale">Ovale</option>
                                            <option value="Irreguliere">Irr√©guli√®re</option>
                                            <option value="Coralliforme">Coralliforme</option>
                                            <option value="Spiculee">Spicul√©e</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‚≠ï Contour du calcul</label>
                                        <select name="contour_calcul" class="input-field">
                                            <option value="">-- S√©lectionner --</option>
                                            <option value="Lisse">Lisse</option>
                                            <option value="Irregulier">Irr√©gulier</option>
                                            <option value="Spicule">Spicul√©</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">üí† Densit√© du noyau (UH)</label>
                                        <input type="number" name="densite_noyau" class="input-field" placeholder="Ex: 800">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">üé® Densit√©s des diff√©rentes couches</label>
                                        <input type="text" name="densites_couches" class="input-field" placeholder="Ex: Couche 1: 800 UH, couche 2: 650 UH...">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ü©∫ Autres calcifications (paroi vasculaire, ganglions, score calcique...)</label>
                                    <textarea name="calcifications_autres" rows="2" class="input-field" placeholder="D√©crivez les autres calcifications observ√©es..."></textarea>
                                </div>
                                
                                <!-- Retentissement sur le haut appareil -->
                                <div class="mt-6 pt-6 border-t-2 border-purple-300">
                                    <h5 class="text-md font-semibold text-purple-700 mb-4">ü´ò Retentissement sur le haut appareil</h5>
                                    
                                    <!-- Mesures rein gauche -->
                                    <div class="mb-4">
                                        <h6 class="text-sm font-semibold text-gray-700 mb-3 bg-purple-100 p-2 rounded">Rein gauche</h6>
                                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Diam√®tre cranio-caudal (mm)</label>
                                                <input type="number" step="0.1" name="rein_gauche_cranio_caudal" class="input-field" placeholder="Ex: 110">
                                            </div>
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Diam√®tre ant√©ro-post√©rieur (mm)</label>
                                                <input type="number" step="0.1" name="rein_gauche_antero_posterieur" class="input-field" placeholder="Ex: 55">
                                            </div>
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Diam√®tre transversal (mm)</label>
                                                <input type="number" step="0.1" name="rein_gauche_transversal" class="input-field" placeholder="Ex: 50">
                                            </div>
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Volume calcul√©</label>
                                                <div class="flex items-center gap-2">
                                                    <input type="number" step="0.1" name="rein_gauche_volume" id="rein_gauche_volume" class="input-field bg-gray-100" readonly placeholder="Auto">
                                                    <span class="text-gray-600 text-xs">cm¬≥</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Mesures rein droit -->
                                    <div class="mb-4">
                                        <h6 class="text-sm font-semibold text-gray-700 mb-3 bg-purple-100 p-2 rounded">Rein droit</h6>
                                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Diam√®tre cranio-caudal (mm)</label>
                                                <input type="number" step="0.1" name="rein_droit_cranio_caudal" class="input-field" placeholder="Ex: 105">
                                            </div>
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Diam√®tre ant√©ro-post√©rieur (mm)</label>
                                                <input type="number" step="0.1" name="rein_droit_antero_posterieur" class="input-field" placeholder="Ex: 52">
                                            </div>
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Diam√®tre transversal (mm)</label>
                                                <input type="number" step="0.1" name="rein_droit_transversal" class="input-field" placeholder="Ex: 48">
                                            </div>
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Volume calcul√©</label>
                                                <div class="flex items-center gap-2">
                                                    <input type="number" step="0.1" name="rein_droit_volume" id="rein_droit_volume" class="input-field bg-gray-100" readonly placeholder="Auto">
                                                    <span class="text-gray-600 text-xs">cm¬≥</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Autres mesures - √âpaisseur cortex r√©nal -->
                                    <div class="mb-4">
                                        <h6 class="text-sm font-semibold text-gray-700 mb-3">√âpaisseur minimale cortex r√©nal (mm)</h6>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Rein gauche</label>
                                                <input type="number" step="0.1" name="epaisseur_cortex_renal_gauche" class="input-field" placeholder="Ex: 7">
                                            </div>
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">Rein droit</label>
                                                <input type="number" step="0.1" name="epaisseur_cortex_renal_droit" class="input-field" placeholder="Ex: 7">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Diam√®tre du py√©lon -->
                                    <div class="mb-4">
                                        <h6 class="text-sm font-semibold text-gray-700 mb-3">Diam√®tre du py√©lon (mm)</h6>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">C√¥t√© gauche</label>
                                                <input type="number" step="0.1" name="diametre_pyelon_gauche" class="input-field" placeholder="Ex: 10">
                                            </div>
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">C√¥t√© droit</label>
                                                <input type="number" step="0.1" name="diametre_pyelon_droit" class="input-field" placeholder="Ex: 10">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Diam√®tre uret√®re en amont -->
                                    <div class="mb-4">
                                        <h6 class="text-sm font-semibold text-gray-700 mb-3">Diam√®tre uret√®re en amont (mm)</h6>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">C√¥t√© gauche</label>
                                                <input type="number" step="0.1" name="diametre_uretere_amont_gauche" class="input-field" placeholder="Ex: 5">
                                            </div>
                                            <div>
                                                <label class="block text-xs font-medium text-gray-700 mb-2">C√¥t√© droit</label>
                                                <input type="number" step="0.1" name="diametre_uretere_amont_droit" class="input-field" placeholder="Ex: 5">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Malformations -->
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-2">üèóÔ∏è Malformations urinaires ou obstacles</label>
                                        <select name="malformations_urinaires" class="input-field">
                                            <option value="">-- S√©lectionner --</option>
                                            <option value="Aucune">Aucune</option>
                                            <option value="Stenose JPU">St√©nose de la jonction py√©lo-ur√©t√©rale (JPU)</option>
                                            <option value="Syndrome JUV">Syndrome de la jonction ur√©t√©ro-v√©sicale</option>
                                            <option value="Megauretere">M√©gauret√®re</option>
                                            <option value="Reflux vesico-ureteral">Reflux v√©sico-ur√©t√©ral</option>
                                            <option value="Rein fer cheval">Rein en fer √† cheval</option>
                                            <option value="Ectopie renale">Ectopie r√©nale</option>
                                            <option value="Duplicite ureterale">Duplicit√© ur√©t√©rale</option>
                                            <option value="Ureterocele">Ur√©t√©roc√®le</option>
                                            <option value="Valve uretre posterieur">Valve de l'ur√®tre post√©rieur</option>
                                            <option value="Diverticule caliciel">Diverticule caliciel</option>
                                            <option value="Kyste renal">Kyste r√©nal</option>
                                            <option value="Polykystose renale">Polykystose r√©nale</option>
                                            <option value="Autre malformation">Autre malformation</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pi√®ce jointe imagerie (√† impl√©menter) -->
                        <!-- <div class="mt-4 pt-4 border-t border-purple-200">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìé Pi√®ce jointe : R√©sultats d'imagerie (facultatif)</label>
                            <input type="file" name="fichier_imagerie" accept="image/*,.pdf" class="input-field">
                            <p class="text-xs text-gray-500 mt-1">Formats accept√©s : JPG, PNG, PDF (Max 10 Mo)</p>
                        </div> -->
                    </div>
                </div>

                <!-- Section: R√©sultats de laboratoire -->
                <div class="bg-teal-50 border-2 border-teal-200 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-teal-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">üß™</span> R√©sultats de laboratoire
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">üî¨ S√©diment urinaire</label>
                            <textarea name="sediment_urinaire" rows="2" class="input-field" placeholder="R√©sultats du s√©diment urinaire..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ü¶† ECBU (Examen Cytobact√©riologique Urinaire)</label>
                            <textarea name="ecbu_resultats" rows="2" class="input-field" placeholder="R√©sultats de l'ECBU (germe isol√© si infection)..."></textarea>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‚öóÔ∏è pH urinaire</label>
                                <input type="number" step="0.1" name="ph_urinaire" class="input-field" placeholder="Ex: 6.5">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">üíß Densit√© urinaire</label>
                                <input type="number" step="0.001" name="densite_urinaire" class="input-field" placeholder="Ex: 1.020">
                            </div>
                        </div>
                        
                        <!-- Nouveau: Fonction r√©nale -->
                        <div class="border-l-4 border-teal-400 pl-4 mt-4">
                            <h4 class="text-lg font-semibold text-teal-800 mb-3">ü´ò Fonction r√©nale</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Ur√©e (g/L ou mmol/L)</label>
                                    <input type="number" step="0.01" name="uree" class="input-field" placeholder="Ex: 0.35 g/L ou 5.8 mmol/L">
                                    <p class="text-xs text-gray-500 mt-1">Normale: 0.15-0.45 g/L (2.5-7.5 mmol/L)</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Cr√©atinine (mg/L ou ¬µmol/L)</label>
                                    <input type="number" step="0.1" name="creatinine" class="input-field" placeholder="Ex: 10 mg/L ou 88 ¬µmol/L">
                                    <p class="text-xs text-gray-500 mt-1">Normale H: 7-13 mg/L, F: 6-11 mg/L</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Nouveau: Hormones thyro√Ødiennes -->
                        <div class="border-l-4 border-teal-400 pl-4 mt-4">
                            <h4 class="text-lg font-semibold text-teal-800 mb-3">üî¨ Hormones thyro√Ødiennes</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">T3 (ng/mL)</label>
                                    <input type="number" step="0.01" name="t3" class="input-field" placeholder="Ex: 1.2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">T4 (¬µg/dL)</label>
                                    <input type="number" step="0.01" name="t4" class="input-field" placeholder="Ex: 8.5">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">TSH (mUI/L)</label>
                                    <input type="number" step="0.01" name="tsh" class="input-field" placeholder="Ex: 2.5">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Nouveau: Marqueurs m√©taboliques urinaires -->
                        <div class="border-l-4 border-teal-400 pl-4 mt-4">
                            <h4 class="text-lg font-semibold text-teal-800 mb-3">üíé Marqueurs m√©taboliques urinaires</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Calciurie (mg/24h)</label>
                                    <input type="number" step="0.1" name="calciurie" class="input-field" placeholder="Ex: 250">
                                    <p class="text-xs text-gray-500 mt-1">Normale: 100-300 mg/24h</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Calci√©mie (mmol/L)</label>
                                    <input type="number" step="0.01" name="calciemie" class="input-field" placeholder="Ex: 2.4">
                                    <p class="text-xs text-gray-500 mt-1">Normale: 2.2-2.6 mmol/L</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Oxalurie (mg/24h)</label>
                                    <input type="number" step="0.1" name="oxalurie" class="input-field" placeholder="Ex: 35">
                                    <p class="text-xs text-gray-500 mt-1">Normale: 20-45 mg/24h</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Nouveau: Infection urinaire -->
                        <div class="border-l-4 border-red-400 pl-4 mt-4">
                            <h4 class="text-lg font-semibold text-red-800 mb-3">ü¶† Infection urinaire</h4>
                            <div class="space-y-3">
                                <div class="flex items-center space-x-3">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" name="infection_urinaire" value="true" class="mr-2 h-5 w-5 text-indigo-600 rounded">
                                        <span class="text-sm font-medium text-gray-700">Pr√©sence d'infection urinaire associ√©e</span>
                                    </label>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Germe √† ur√©ase identifi√©</label>
                                    <select name="germe_urease" class="input-field">
                                        <option value="">-- S√©lectionner --</option>
                                        <option value="Aucun">Aucun</option>
                                        <option value="Proteus mirabilis">Proteus mirabilis (ur√©ase +)</option>
                                        <option value="Proteus vulgaris">Proteus vulgaris (ur√©ase +)</option>
                                        <option value="Klebsiella pneumoniae">Klebsiella pneumoniae (ur√©ase +)</option>
                                        <option value="Pseudomonas aeruginosa">Pseudomonas aeruginosa (ur√©ase +)</option>
                                        <option value="Staphylococcus saprophyticus">Staphylococcus saprophyticus (ur√©ase +)</option>
                                        <option value="Ureaplasma urealyticum">Ureaplasma urealyticum (ur√©ase +)</option>
                                        <option value="Morganella morganii">Morganella morganii (ur√©ase +)</option>
                                        <option value="Providencia rettgeri">Providencia rettgeri (ur√©ase +)</option>
                                        <option value="Autre germe urease+">Autre germe √† ur√©ase</option>
                                    </select>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">‚ö†Ô∏è Important pour d√©terminer le type de calcul (influence Struvite, Carbapatite, Urate d'ammonium)</p>
                        </div>
                        
                        <!-- Pi√®ce jointe laboratoire (√† impl√©menter) -->
                        <!-- <div class="mt-4 pt-4 border-t border-teal-200">
                            <label class="block text-sm font-medium text-gray-700 mb-2">üìé Pi√®ce jointe : R√©sultats de laboratoire (facultatif)</label>
                            <input type="file" name="fichier_laboratoire" accept="image/*,.pdf" class="input-field">
                            <p class="text-xs text-gray-500 mt-1">Formats accept√©s : JPG, PNG, PDF (Max 10 Mo)</p>
                        </div> -->
                    </div>
                </div>

                <!-- Section: Ordonnances & documents (√† impl√©menter) -->
                <!-- <div class="bg-orange-50 border-2 border-orange-200 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-orange-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">üìÑ</span> Ordonnances & documents ant√©rieurs
                    </h3>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">üìé Pi√®ce jointe : Ordonnance ant√©rieure (facultatif)</label>
                        <input type="file" name="fichier_ordonnance" accept="image/*,.pdf" class="input-field">
                        <p class="text-xs text-gray-500 mt-1">Formats accept√©s : JPG, PNG, PDF (Max 10 Mo)</p>
                    </div>
                </div> -->

                <!-- Section: Notes -->
                <div class="bg-gray-50 border-2 border-gray-200 rounded-lg p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-2xl mr-2">üìù</span> Notes compl√©mentaires
                    </h3>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Notes libres</label>
                        <textarea name="notes" rows="4" class="input-field" placeholder="Informations compl√©mentaires, observations particuli√®res..."></textarea>
                    </div>
                </div>

                <!-- Boutons d'action -->
                <div class="flex justify-end space-x-4 pt-4 border-t border-gray-200">
                    <a href="/" class="btn btn-secondary">
                        Annuler
                    </a>
                    <button type="submit" class="btn btn-primary">
                        ‚úì Cr√©er le patient
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <script src="/static/js/csrf.js"></script>
    <script src="/static/js/nouveau-patient.js"></script>
</body>
</html>
